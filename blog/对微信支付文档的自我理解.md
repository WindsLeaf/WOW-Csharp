# 移动web端开发之对微信支付文档的自我理解

[微信支付开发者文档 (qq.com)](https://pay.weixin.qq.com/wiki/doc/apiv3/wxpay/pages/index.shtml)

## 前端开发中微信支付的分类

在移动前端开发中微信支付大概可以分成两部分，分别是**网页调用微信支付和小程序调用微信支付**，其中网页调用微信支付又可以分为微信内置浏览器(微信公众号)调用微信支付和普通浏览器H5页面调用微信支付。

微信支付开发文档中，对H5支付是这样描述的

> H5支付是指商户在**微信客户端外的移动端网页展示商品或服务**，用户在前述页面确认使用微信支付时，商户发起本服务呼起微信客户端进行支付。
>
> **说明：**要求商户已有H5商城网站，并且**已经过ICP备案**，即可申请接入。

微信支付中对`jsapi`支付是这样描述的

> JSAPI支付适用于线下场所、**公众号场景和PC网站场景**。
>
> 商户已有H5商城网站，**用户通过消息或扫描二维码在微信内打开网页时，可以调用微信支付完成下单购买的流程。**

也就是说可以有以下这个表格来展示移动前端调用微信支付

+ web调用微信支付
  + **微信内置浏览器外网页调用微信支付**使用**H5专属微信支付文档**调用微信支付 [微信支付-开发者文档 (qq.com)](https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_6_0.shtml)
  + **微信内置浏览器调用微信支付**使用 **`JSAPI`**调用微信支付 [微信支付-普通下单开发者文档 (qq.com)](https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter1_1_1.shtml)
+ 小程序调用微信支付
  + 使用 小程序专属调用微信支付文档开发 [微信支付-开发者文档 (qq.com)](https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_8_0.shtml)

## 移动前端网页调用微信支付面临的两难困境

首先，从技术上来说，H5专用微信支付和`JSAPI`调用微信支付实际上是大同小异，也就是说这两者开发的难度基本一致，开发的过程也大差不差，这两个会一个就能很快地掌握另一个。通过JavaScript来分辨当前浏览器是否是微信内置浏览器也是可以实现的，也就是说**一套代码既可以在微信内置浏览器支付也可以在微信以外的浏览器支付**在技术上是完全可行的。但是，同样都是网页，却要用两种方式进行支付难免让人不爽！

其实，微信的做法在技术和商业是完全可以理解的，首先，因为调用支付有两种方式，势必会让一部分开发者选择JSAPI进行微信内置浏览器的支付，**这样就会把一部分用户的支付行为完全地锁在微信客户端内进行**，而不是微信客户端以外的部分调用微信客户端进行支付，其次，微信内置浏览器的支付行为有很大一部分是和微信公众号相联系的，按照正常的小平台的逻辑（比如我现在开发的这个平台），**一般的思路是微信公众号打开网页→网页通过微信公众号获取微信用户信息→将微信用户信息转换为当前网页的用户信息，并储存在数据库上面→调用微信支付**。这样微信支付势必会发生在也只能发生在微信的内置浏览器上面。

但是，**微信内置浏览器的支付又会产生另一个问题，无法调用支付宝支付**，是不是似乎能真正地理解微信的“良苦用心”了？也是，微信肯定不允许你用着我微信平台的公众号却用支付宝进行支付这种行为的。当然了，如果就是想让用户用着微信公众号却用支付宝进行支付也不是没有办法，引导用户打开浏览器进行支付宝支付不就行了，就像下面这幅图一样👇，[浅谈微信内置浏览器调用支付宝支付完整教程《1》CSDN博客](https://blog.csdn.net/github_37847992/article/details/106459071)，所以，应该根据你的web前端服务对象来选取如何进行调用微信支付。

![](https://suyuesheng-biaozhun-blog-tupian.oss-cn-qingdao.aliyuncs.com/blogimg/20210328210749.png)



