# 数组与集合的概念

数组是一种指定长度和数据类型的对象，在实际应用中有一定的局限性。

集合正是为这种局限性而生的，集合的长度能根据需要更改，也允许存放任何数据类型的值。

# `Array`,`ArrayList` and `List<T>`

**Array、ArrayList和List都是从IList派生出来的，它们都实现了IEnumerable接口**

从某种意义上来说，ArrayList和List属于集合的范畴，因为他们都来自程序集`System.Collections`，但是因为它们都是储存了多个变量的数据结构，并且都不是类似键值对的组合，并且没有先进先出或者先进后出的机制，故而称为数组。

我们一般称呼`Array`,`ArrayList` and `List<T>`为数组。

## Array

**Array必须在定义的时候（不初始化的情况下声明数组变量除外）必须定义数组最外侧的长度。**比如：

```c#
int[] vs = new int[10];
int[,] duoWei = new int[3, 4];
int[][] jiaoCuo = new int[3][]; // 该数组是由三个一维数组组成的
```

### 一维数组

#### 定义

用类似于这种方式定义一个数组

```c#
int[] array = new int[5];
```

#### 初始化赋值

用类似于这种方式初始化

```csharp
int[] array1 = new int[] { 1, 3, 5, 7, 9 };
```

**也可以进行隐式初始化**

```csharp
int[] array2 = { 1, 3, 5, 7, 9 };
string[] weekDays2 = { "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" };
```

用类似于下面这种方式先声明，再赋值

```csharp
int[] array3;
array3 = new int[] { 1, 3, 5, 7, 9 };   // OK
//array3 = {1, 3, 5, 7, 9};   // Error
```

### 多维数组

数组可具有多个维度。**多维数组的每个元素是声明时的数组所属类型的元素。比如说`int[,]`的每个元素都是int类型而不是int[]类型。**换种说法就是**多维数组不能算做“数组组成的数组”**。

#### 定义

用类似下面这种方式声明一个二维数组的长度

```csharp
int[,] array = new int[4, 2];
```

#### 初始化赋值

用类似于下面的方式初始化多维数组：

```c#
// Two-dimensional array.
int[,] array2D = new int[,] { { 1, 2 }, { 3, 4 }, { 5, 6 }, { 7, 8 } };
// The same array with dimensions specified.
int[,] array2Da = new int[4, 2] { { 1, 2 }, { 3, 4 }, { 5, 6 }, { 7, 8 } };
// A similar array with string elements.
string[,] array2Db = new string[3, 2] { { "one", "two" }, { "three", "four" },
                                        { "five", "six" } };

// Three-dimensional array.
int[,,] array3D = new int[,,] { { { 1, 2, 3 }, { 4, 5, 6 } },
                                 { { 7, 8, 9 }, { 10, 11, 12 } } };
```

还可在不指定级别的情况下初始化数组

```csharp
int[,] array4 = { { 1, 2 }, { 3, 4 }, { 5, 6 }, { 7, 8 } };
```

不初始化的情况下声明数组变量：

```csharp
int[,] array5;
array5 = new int[,] { { 1, 2 }, { 3, 4 }, { 5, 6 }, { 7, 8 } };   // OK
//array5 = {{1,2}, {3,4}, {5,6}, {7,8}};   // Error
```

#### 元素赋值和获取元素

可以**用类似于`array[1,2]`的方式来获取数组的值和为数组赋值。**

**`GetLength(0)`可以获取最外围数组的长度，`GetLength(1)`可以获得第二层数组的长度。以此类推。**为一个二维数组`duoWei`循环赋值的方式如下：

```c#
Console.WriteLine("二维数组赋值");
for (int i = 0; i < duoWei.GetLength(0); i++)
{
    for (int j = 0; j < duoWei.GetLength(1); j++)
    {
        duoWei[i, j] = i + j;
    }
}
```

> **如何获取二维数组中的元素个数呢？**
>
> ```c#
> int[,] array = new int[,] {{1,2,3},{4,5,6},{7,8,9}};//定义一个3行3列的二维数组
> int row = array.Rank;//获取维数，这里指行数
> int col = array.GetLength(1);//获取指定维度中的元素个数，这里也就是列数了。（0是第一维，1表示的是第二维）
> int col = array.GetUpperBound(0)+1;//获取指定维度的索引上限，在加上一个1就是总数，这里表示二维数组的行数
> int num = array.Length;//获取整个二维数组的长度，即所有元的个数
> ```

### 交错数组

交错数组是一个数组，其元素是数组，大小可能不同。 **交错数组有时称为“数组的数组”。**

交错数组不初始化就声明的方式如下：

```c#
int[][] ccf;
ccf = new int[3][];
```

### 方法和属性

像数组这种储存多个变量的数据结构，**最重要的就是增查删改、获取长度和数据类型转换**。**Array因为数组的特性，长度不可改变，所以增查删改只能有查和改。**

#### 改

Array类型用用类似于下面的方式进行改操作：

```c#
vs[0] = 12; //一维数组
duoWei[1, 2] = 3; //多维数组
jiaoCuo[1][1] = 2; //交错数组
```

#### 查

Array类型用类似于下面的方式进行查操作：

```c#
int[] vs = new int[10];
vs[0] = 12;
Console.WriteLine(Array.IndexOf(vs, 12)); //0
Console.WriteLine(vs.Contains(12)); // True
```

#### 获取长度

可以用类似于下面这种方式来获取：

```c#
Console.WriteLine(vs.Length);
Console.WriteLine(vs.Count());
```

交错数组的`Length`是获取所包含数组的个数，多维数组的`Length`是获取数组的元素的总个数，多维数组`GetLength(0)`可以获取最外围数组的长度，`GetLength(1)`可以获得第二层数组的长度。以此类推。

#### `Array.ConvertAll()` 数据类型转换

可以用`Array.ConvertAll<TInput,TOutput>(TInput[], Converter<TInput,TOutput>) `来进行数组类型的转换。

参数如下：

> - array
>
>   TInput[]
>
> 要转换为目标类型的从零开始的一维 [Array](https://docs.microsoft.com/zh-cn/dotnet/api/system.array?view=net-6.0)。
>
> - converter
>
>   [Converter](https://docs.microsoft.com/zh-cn/dotnet/api/system.converter-2?view=net-6.0)
>
> 用于将每个元素从一种类型转换为另一种类型的 [Converter](https://docs.microsoft.com/zh-cn/dotnet/api/system.converter-2?view=net-6.0)。

demo如下：

```c#
double[] vs3 = Array.ConvertAll(vs, item => (double)item);
```

#### 切片

默认状态下只能对一维数组进行切片，或者通过交错数组获取的一维数组也可以进行切片。

切片的方式类似于`vs[1..5]`，表示vs数组从1到5，左闭右开。^1表示-1，即最后一个元素。`[^3..^1]`表示倒数第三个元素到倒数第一个元素，左闭右开。

## ArrayList

## `List<T>`

### 定义

用类似于下面的三种方式中的任意一种来声明`List<T>`：

| [List()](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1.-ctor?view=net-6.0#System_Collections_Generic_List_1__ctor) | 初始化 [List](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1?view=net-6.0) 类的新实例，该实例为空并且具有默认初始容量。 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| [List(IEnumerable)](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1.-ctor?view=net-6.0#System_Collections_Generic_List_1__ctor_System_Collections_Generic_IEnumerable__0__) | 初始化 [List](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1?view=net-6.0) 类的新实例，该实例包含从指定集合复制的元素并且具有足够的容量来容纳所复制的元素。 |
| [List(Int32)](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1.-ctor?view=net-6.0#System_Collections_Generic_List_1__ctor_System_Int32_) | 初始化 [List](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1?view=net-6.0) 类的新实例，该实例为空并且具有指定的初始容量。 |

### 初始化

用类似于下面的方式在声明时初始化：

```c#
List<string> listA = new List<string>() { "hello", " ", "wrold" };
```

### 循环

`List<T>`有一个名称为`ForEach`的方法：

```csharp
public void ForEach (Action<T> action);
```

该方法的本质**是要对 [List](https://docs.microsoft.com/zh-cn/dotnet/api/system.collections.generic.list-1?view=net-6.0) 的每个元素执行的 [Action](https://docs.microsoft.com/zh-cn/dotnet/api/system.action-1?view=net-6.0) 委托。**[Action](https://docs.microsoft.com/zh-cn/dotnet/api/system.action-1?view=net-6.0) 的参数即为`List<T>`在循环过程中的每个元素。

demo如下：

```c#
// 声明
List<string> listA = new List<string>() { "hello", " ", "wrold" };
// 循环
var i = 0;
listA.ForEach(item =>
              {
                  Console.WriteLine($"第{i + 1}个");
                  Console.WriteLine(item);
                  i++;
              });
```

## 区别

## `Array`,`ArrayList` and `List<T>`之间的转换

## 数组的打印

# 键值对集合

## HashTable

## HashList

## HashSet

## **Dictionary**

## 区别

## 互相转换

## 集合的打印

# Json解析

## Json格式概述

## 解析

